# Copyright (c) 2021 Nordic Semiconductor ASA
# SPDX-License-Identifier: Apache-2.0
#
# This file contains selected Kconfig options for the application.

CONFIG_SENSOR=y
# CONFIG_BLINK is a custom driver defined in drivers/

# Bluetooth configuration
CONFIG_BT=y
CONFIG_BT_PERIPHERAL=y
CONFIG_BT_DEVICE_NAME="ESP32 Smart Home"
CONFIG_BT_DEVICE_APPEARANCE=0
CONFIG_BT_MAX_CONN=1
CONFIG_BT_MAX_PAIRED=1

# GATT configuration
CONFIG_BT_GATT_DYNAMIC_DB=y
CONFIG_BT_ATT_PREPARE_COUNT=2

# Increase stack sizes for BLE
CONFIG_MAIN_STACK_SIZE=2048
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048

# WiFi configuration
CONFIG_WIFI=y
CONFIG_WIFI_ESP32=y
CONFIG_ESP32_WIFI_STA_AUTO_DHCPV4=y
CONFIG_NET_L2_WIFI_MGMT=y
CONFIG_NET_MGMT=y
CONFIG_NET_MGMT_EVENT=y
CONFIG_NET_MGMT_EVENT_INFO=y
CONFIG_NET_MGMT_EVENT_STACK_SIZE=2048

# Enable WiFi SoftAP (Access Point) mode
CONFIG_WIFI_NM=y
CONFIG_ESP32_WIFI_AP_STA_MODE=y

# ESP32 HAL
CONFIG_BUILD_OUTPUT_BIN=y

# Network configuration
CONFIG_NETWORKING=y
CONFIG_NET_IPV4=y
CONFIG_NET_DHCPV4=y
CONFIG_NET_SOCKETS=y
CONFIG_NET_TCP=y
CONFIG_NET_TCP_WORKQ_STACK_SIZE=2048
CONFIG_NET_CONNECTION_MANAGER=y

# Network buffers
CONFIG_NET_PKT_RX_COUNT=10
CONFIG_NET_PKT_TX_COUNT=10
CONFIG_NET_BUF_RX_COUNT=10
CONFIG_NET_BUF_TX_COUNT=10
CONFIG_NET_MAX_CONTEXTS=10

# MQTT configuration
CONFIG_MQTT_LIB=y
CONFIG_MQTT_LIB_TLS=n
CONFIG_NET_SOCKETS_POLL_MAX=4
CONFIG_DNS_RESOLVER=y
CONFIG_DNS_RESOLVER_MAX_SERVERS=2
CONFIG_NET_SOCKETS_DNS_TIMEOUT=5000

# Display configuration (SSD1306)
CONFIG_DISPLAY=y
CONFIG_I2C=y

# Character framebuffer
CONFIG_CHARACTER_FRAMEBUFFER=y

# C++ support
CONFIG_CPP=y
CONFIG_STD_CPP17=y
CONFIG_MINIMAL_LIBC=n
CONFIG_NEWLIB_LIBC=y
CONFIG_NEWLIB_LIBC_NANO=n
CONFIG_PICOLIBC=n

# Logging configuration
CONFIG_LOG=y
CONFIG_LOG_MODE_DEFERRED=y
CONFIG_LOG_BUFFER_SIZE=4096
CONFIG_LOG_DEFAULT_LEVEL=3
CONFIG_PRINTK=y
CONFIG_EARLY_CONSOLE=y
CONFIG_CONSOLE=y
CONFIG_UART_CONSOLE=y
CONFIG_SERIAL=y

# Enable logging for modules
CONFIG_BT_LOG_LEVEL_INF=y
CONFIG_WIFI_LOG_LEVEL_INF=y

# WiFi Credentials (override these in wifi_config.conf - gitignored)
# Default values are safe placeholders
CONFIG_WIFI_SSID="ESP32_Network"
CONFIG_WIFI_PASSWORD="password123"
CONFIG_WIFI_AP_SSID="ESP32_SmartHome"
CONFIG_WIFI_AP_PASSWORD="12345678"

