# Copyright (c) 2021 Nordic Semiconductor ASA
# SPDX-License-Identifier: Apache-2.0
#
# This file is the application Kconfig entry point. All application Kconfig
# options can be defined here or included via other application Kconfig files.
# You can browse these options using the west targets menuconfig (terminal) or
# guiconfig (GUI).

menu "Zephyr"
source "Kconfig.zephyr"
endmenu

module = APP
module-str = APP
source "subsys/logging/Kconfig.template.log_config"

menu "Voice Control"

config APP_VOICE_CONTROL
	bool "Enable voice control features"
	default y
	help
	  Enable voice control with I2S microphone, wake-word detection,
	  MQTT communication, and OTA updates.

config APP_I2S_MIC
	bool "Enable I2S microphone"
	depends on APP_VOICE_CONTROL
	depends on I2S
	default y
	help
	  Enable I2S MEMS microphone (e.g., INMP441) for audio capture.

config APP_WAKEWORD
	bool "Enable wake-word detection"
	depends on APP_VOICE_CONTROL
	default y
	help
	  Enable local wake-word detection for voice activation.

if APP_WAKEWORD

choice APP_WAKEWORD_MODEL_TYPE
	prompt "Wake-word model type"
	default APP_WAKEWORD_MODEL_EDGE_IMPULSE
	help
	  Select the type of model to use for wake-word detection.

config APP_WAKEWORD_MODEL_EDGE_IMPULSE
	bool "Edge Impulse model"
	help
	  Use an Edge Impulse trained model (TensorFlow Lite for Microcontrollers).

config APP_WAKEWORD_MODEL_CUSTOM
	bool "Custom model"
	help
	  Use a custom model format.

config APP_WAKEWORD_MODEL_PLACEHOLDER
	bool "Placeholder (energy-based detection)"
	help
	  Use simple energy-based detection for testing without a real model.

endchoice

config APP_WAKEWORD_MODEL_FILE
	string "Model file path"
	default "wakeword_model.tflite"
	depends on APP_WAKEWORD_MODEL_EDGE_IMPULSE || APP_WAKEWORD_MODEL_CUSTOM
	help
	  Path to the model file (relative to project root or absolute).
	  For Edge Impulse, this should be a .tflite file.

config APP_WAKEWORD_MODEL_EMBEDDED
	bool "Embed model in binary"
	default y
	depends on APP_WAKEWORD_MODEL_EDGE_IMPULSE || APP_WAKEWORD_MODEL_CUSTOM
	help
	  Embed the model data directly in the firmware binary.
	  If disabled, model will be loaded from external storage.

config APP_WAKEWORD_ARENA_SIZE
	int "TensorFlow Lite arena size (bytes)"
	default 8192
	depends on APP_WAKEWORD_MODEL_EDGE_IMPULSE
	help
	  Memory arena size for TensorFlow Lite Micro operations.
	  Adjust based on model complexity.

endif # APP_WAKEWORD

config APP_MQTT
	bool "Enable MQTT client"
	depends on APP_VOICE_CONTROL
	depends on MQTT_LIB
	depends on NET_IPV4
	default y
	help
	  Enable MQTT client for communication with Raspberry Pi broker.

config APP_OTA
	bool "Enable OTA updates"
	depends on APP_VOICE_CONTROL
	depends on BOOTLOADER_MCUBOOT
	depends on HTTP_CLIENT
	default y
	help
	  Enable over-the-air firmware updates via HTTP.

config APP_VERSION
	string "Application version"
	default "1.0.0"
	help
	  Semantic version string for the application.

endmenu

menu "WiFi Configuration"

config WIFI_SSID
	string "WiFi SSID for station mode"
	default "ESP32_Network"
	help
	  WiFi network SSID to connect to in station mode.
	  Override in wifi_config.conf (gitignored).

config WIFI_PASSWORD
	string "WiFi password for station mode"
	default "password123"
	help
	  WiFi network password for station mode.
	  Override in wifi_config.conf (gitignored).

config WIFI_AP_SSID
	string "WiFi SSID for AP mode"
	default "ESP32_SmartHome"
	help
	  WiFi access point SSID when running in AP mode.

config WIFI_AP_PASSWORD
	string "WiFi password for AP mode"
	default "12345678"
	help
	  WiFi access point password (minimum 8 characters).

config WIFI_CHANNEL
	int "WiFi channel hint (0 = scan all channels)"
	default 0
	range 0 13
	help
	  If you know which channel your WiFi router uses, set it here
	  to speed up connection (skips scanning other channels).
	  Set to 0 to scan all channels (slower but more reliable).
	  Common channels: 1, 6, 11 (non-overlapping in 2.4GHz).
	  
	  To find your router's channel:
	  - Windows: netsh wlan show networks mode=bssid
	  - Linux: iwlist scan | grep Channel
	  - Router admin page: Look for "Wireless Channel"

endmenu

menu "MQTT Configuration"

config MQTT_BROKER_HOSTNAME
	string "MQTT broker hostname or IP address"
	default "192.168.2.1"
	help
	  MQTT broker hostname or IP address to connect to.
	  Override in mqtt_config.conf (gitignored).

config MQTT_BROKER_PORT
	int "MQTT broker port"
	default 1883
	range 1 65535
	help
	  MQTT broker TCP port (typically 1883 for non-TLS, 8883 for TLS).

config MQTT_CLIENT_ID
	string "MQTT client ID"
	default "esp32_001"
	help
	  Unique client identifier for MQTT connection.
	  Override in mqtt_config.conf (gitignored).

config MQTT_USERNAME
	string "MQTT username"
	default "esp32_user"
	help
	  MQTT broker authentication username.
	  Override in mqtt_config.conf (gitignored).

config MQTT_PASSWORD
	string "MQTT password"
	default "password"
	help
	  MQTT broker authentication password.
	  Override in mqtt_config.conf (gitignored).

config MQTT_DEVICE_ID
	string "Device ID for MQTT topics"
	default "esp32_001"
	help
	  Device identifier used in MQTT topic names.
	  Example: smart_home/devices/{device_id}/status

endmenu
